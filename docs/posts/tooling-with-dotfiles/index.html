<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Necessay tooling made easy with .files | Manish Sahani</title><meta name=keywords content="tooling,git,git-bare"><meta name=description content="Many nights of potential productive work programmers have lost by procrastinating on properly managing their dotfiles. This article discusses an elegant way to manage and share dotfiles across machines using a single git repository."><meta name=author content="Manish Sahani"><link rel=canonical href=https://www.kalkayan.io/posts/tooling-with-dotfiles/><meta name=google-site-verification content="XYZabc"><link href=/assets/css/stylesheet.min.4f17e9b5c8d7b3bf04d23c9613f1fed68ceac6a2e9c4734ddfa9dfb4c4df1c1b.css integrity="sha256-TxfptcjXs78E0jyWE/H+1ozqxqLpxHNN36nftMTfHBs=" rel="preload stylesheet" as=style><link rel=icon href=https://www.kalkayan.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://www.kalkayan.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://www.kalkayan.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://www.kalkayan.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://www.kalkayan.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><meta property="og:title" content="Necessay tooling made easy with .files"><meta property="og:description" content="Many nights of potential productive work programmers have lost by procrastinating on properly managing their dotfiles. This article discusses an elegant way to manage and share dotfiles across machines using a single git repository."><meta property="og:type" content="article"><meta property="og:url" content="https://www.kalkayan.io/posts/tooling-with-dotfiles/"><meta property="og:image" content="https://www.kalkayan.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="Manish Sahani"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.kalkayan.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Necessay tooling made easy with .files"><meta name=twitter:description content="Many nights of potential productive work programmers have lost by procrastinating on properly managing their dotfiles. This article discusses an elegant way to manage and share dotfiles across machines using a single git repository."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Necessay tooling made easy with .files","name":"Necessay tooling made easy with .files","description":"Customizing an operating system has always fascinated programmers. There are tons of great articles out there with great customization tips. Most of these articles use dotfiles for …","keywords":["tooling","git","git-bare"],"articleBody":"Customizing an operating system has always fascinated programmers. There are tons of great articles out there with great customization tips. Most of these articles use dotfiles for customization, and these simple invisible files may seem pointless for a novice. But, they become a swiss army knife if properly configured.\nPersonalizing a system takes a lot of time and hard work, and nobody wishes to do it over and over again. Setting up a machine with a preferred setting should be done in minimal steps and without writing any code. I’ve divided this process into two parts: sharing dotfiles and writing an automated script.\nThis article will discuss an elegant way to manage, modify, and share dotfiles across multiple devices using a single git repository.\nManaging and tracking [dot]files The majority of developers use git to manage and share these files and use symlinks to sync them. Well, symlinks works, but it isn’t the best way to sync your local files to the git repository. There are a good number of issues on StackOverflow, pointing issues with dotfiles and symlinks. There is a much better solution to this, written by people at Atlassian – The best way to store your dotfiles: A bare Git repository .\nThe trick to managing these dotfiles is by creating a bare git repository. If you start from scratch, make a bare repository in the $HOME directory.\n# notice the --bare flag; this initializes the repository as a git bare git init --bare $HOME/.dotfiles Bare repositories are special in a way that they omit the working directory. Therefore, we need to define a work tree and git directory for the repository. The --work-tree is set to $HOME directory (since dotfiles live there) and --git-dir to $HOME/.dotfiles (this is our repository location). Our command to use the repository has the prefix git --work-dir $HOME --git-dir $HOME/.dotfiles\nTo make it easier to use, we alias this to dotfiles, which we will use to interact with our dotfiles repository.\nalias dotfiles=\"/usr/bin/git --git-dir=$HOME/.dotfiles --work-tree=$HOME\" Thats it! We are good to track our dotfiles using the dotfiles command. Some of the examples are:\n# to check the version history  dotfiles log # to check the status of the tracked and untracked files  dotfiles status # to add a file for tracking dotfiles commit .vimrc -m \".vimrc added\" # push new files or changes to the github dotfiles push origin main If we look at the output of dotfiles status, We can see all files under $HOME directory are coming under untracked files (see the left side of screenshot below). We clearly don’t want this behavior, and to fix this behavior, we modify the dotfiles repository status configs like below:\n# hides all the untracked files when status command is called dotfiles config status.showUntrackedFiles no Advantages and Use Cases Besides easier management and sharing, this method has various other advantages like:\nEasy setup Setting up a new machine can be a time-consuming task, But with this method, we can use our personalized configs in under a minute. We just need to clone the repository and source the .bashrc or .zshrc file.\ngit clone --bare https://github.com//dotfiles.git $HOME/.dotfiles \u0026\u0026 source ~/.zshrc Versioned dotfiles Best for experimenting with new configurations and keep the change history (Basically all the pros of using git)\n# to check the version history  dotfiles log Share on Multiple devices Share the same configs of multiple devices with minimal changes using git branches. Create a branch for your new machine, example:-\n# Create configurations specific to your aws machines dotfiles checkout -b aws Profiles for dotfiles Create configs based on your environment using branch, create a branch and configure according to you work env.\n# Manage multiple profiles - check out to the work profile  dotfiles checkout work  We completed the first part of our tooling setup, next read - Automate the setup of your development machine.\n","wordCount":"646","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Manish Sahani"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.kalkayan.io/posts/tooling-with-dotfiles/"},"publisher":{"@type":"Organization","name":"Manish Sahani","logo":{"@type":"ImageObject","url":"https://www.kalkayan.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://www.kalkayan.io accesskey=h title="kalkayan (Alt + H)">kalkayan</a></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://www.kalkayan.io/about/ title=About><span>About</span></a></li><li><a href=https://www.kalkayan.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://www.kalkayan.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=http://bit.ly/to-gh><span>Github</span></a></li><li style=padding-top:4px><span class=theme-toggle title="(Alt + T)"><a id=theme-toggle accesskey=t><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span></li></ul></nav></header><div class=d-flex><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Necessay tooling made easy with .files</h1><div class=post-description>Many nights of potential productive work programmers have lost by procrastinating on properly managing their dotfiles. This article discusses an elegant way to manage and share dotfiles across machines using a single git repository.</div><div class=post-meta>4 min&nbsp;·&nbsp;Manish Sahani</div></header><div class=post-content><p><img src=images/banner.jpg alt=banner></p><p>Customizing an operating system has always fascinated programmers. There are tons of great articles out there with great customization tips. Most of these articles use dotfiles for customization, and these simple invisible files may seem pointless for a novice. But, they become a swiss army knife if properly configured.</p><p>Personalizing a system takes a lot of time and hard work, and nobody wishes to do it over and over again. Setting up a machine with a preferred setting should be done in minimal steps and without writing any code. I&rsquo;ve divided this process into two parts: sharing dotfiles and writing an automated script.</p><p>This article will discuss an elegant way to manage, modify, and share dotfiles across multiple devices using a single <code>git</code> repository.</p><h1 id=managing-and-tracking-dotfiles>Managing and tracking [dot]files<a hidden class=anchor aria-hidden=true href=#managing-and-tracking-dotfiles>#</a></h1><p>The majority of developers use <code>git</code> to manage and share these files and use <code>symlinks</code> to sync them. Well, <code>symlinks</code> works, but it isn&rsquo;t the best way to sync your local files to the git repository. There are a good number of issues on <a href=https://stackoverflow.com/questions/46534290/symlink-dotfiles/64548852#64548852>StackOverflow</a>, pointing issues with dotfiles and symlinks. There is a much better solution to this, written by people at Atlassian &ndash; <a href=https://www.atlassian.com/git/tutorials/dotfiles>The best way to store your dotfiles: A bare Git repository </a>.</p><p>The trick to managing these dotfiles is by creating a <a href=https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-init>bare</a> git repository. If you start from scratch, make a <code>bare</code> repository in the <code>$HOME</code> directory.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># notice the --bare flag; this initializes the repository as a git bare</span>
git init --bare $HOME/.dotfiles
</code></pre></div><p>Bare repositories are special in a way that they omit the working directory. Therefore, we need to define a work tree and git directory for the repository. The <code>--work-tree</code> is set to $HOME directory (since dotfiles live there) and <code>--git-dir</code> to <code>$HOME/.dotfiles</code> (this is our repository location). Our command to use the repository has the prefix <code>git --work-dir $HOME --git-dir $HOME/.dotfiles</code></p><p>To make it easier to use, we alias this to <code>dotfiles</code>, which we will use to interact with our dotfiles repository.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>alias dotfiles<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/usr/bin/git --git-dir=</span>$HOME<span style=color:#e6db74>/.dotfiles --work-tree=</span>$HOME<span style=color:#e6db74>&#34;</span>
</code></pre></div><p><strong>Thats it!</strong> We are good to track our dotfiles using the dotfiles command. Some of the examples are:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># to check the version history </span>
dotfiles log

<span style=color:#75715e># to check the status of the tracked and untracked files </span>
dotfiles status

<span style=color:#75715e># to add a file for tracking</span>
dotfiles commit .vimrc -m <span style=color:#e6db74>&#34;.vimrc added&#34;</span>

<span style=color:#75715e># push new files or changes to the github</span>
dotfiles push origin main
</code></pre></div><p>If we look at the output of <code>dotfiles status</code>, We can see all files under <code>$HOME</code> directory are coming under untracked files (see the left side of screenshot below). We clearly don&rsquo;t want this behavior, and to fix this behavior, we modify the dotfiles repository status configs like below:</p><pre><code># hides all the untracked files when status command is called
dotfiles config status.showUntrackedFiles no
</code></pre><h1 id=advantages-and-use-cases>Advantages and Use Cases<a hidden class=anchor aria-hidden=true href=#advantages-and-use-cases>#</a></h1><p>Besides easier management and sharing, this method has various other advantages like:</p><h3 id=easy-setup>Easy setup<a hidden class=anchor aria-hidden=true href=#easy-setup>#</a></h3><p>Setting up a new machine can be a time-consuming task, But with this method, we can use our personalized configs in under a minute.
We just need to clone the repository and source the <code>.bashrc</code> or <code>.zshrc</code> file.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone --bare https://github.com/&lt;username&gt;/dotfiles.git $HOME/.dotfiles <span style=color:#f92672>&amp;&amp;</span> source ~/.zshrc
</code></pre></div><h3 id=versioned-dotfiles>Versioned dotfiles<a hidden class=anchor aria-hidden=true href=#versioned-dotfiles>#</a></h3><p>Best for experimenting with new configurations and keep the change history (Basically all the pros of using git)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># to check the version history </span>
dotfiles log
</code></pre></div><h3 id=share-on-multiple-devices>Share on Multiple devices<a hidden class=anchor aria-hidden=true href=#share-on-multiple-devices>#</a></h3><p>Share the same configs of multiple devices with minimal changes using <strong>git branches</strong>. Create a branch for your new machine, example:-</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Create configurations specific to your aws machines</span>
dotfiles checkout -b aws
</code></pre></div><h3 id=profiles-for-dotfiles>Profiles for dotfiles<a hidden class=anchor aria-hidden=true href=#profiles-for-dotfiles>#</a></h3><p>Create configs based on your environment using <code>branch</code>, create a branch and configure according to you work env.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Manage multiple profiles - check out to the work profile </span>
dotfiles checkout work
</code></pre></div><h1 id=heading><a hidden class=anchor aria-hidden=true href=#heading>#</a></h1><p>We completed the first part of our tooling setup, next read - <a href=/posts/automated-setup/>Automate the setup of your development machine</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.kalkayan.io/tags/tooling/>tooling</a></li><li><a href=https://www.kalkayan.io/tags/git/>git</a></li><li><a href=https://www.kalkayan.io/tags/git-bare/>git-bare</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Necessay tooling made easy with .files on twitter" href="https://twitter.com/intent/tweet/?text=Necessay%20tooling%20made%20easy%20with%20.files&url=https%3a%2f%2fwww.kalkayan.io%2fposts%2ftooling-with-dotfiles%2f&hashtags=tooling%2cgit%2cgit-bare"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class=tool-tip>Share on twitter</span></a>
<a target=_blank rel="noopener noreferrer" aria-label="share Necessay tooling made easy with .files on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.kalkayan.io%2fposts%2ftooling-with-dotfiles%2f&title=Necessay%20tooling%20made%20easy%20with%20.files&summary=Necessay%20tooling%20made%20easy%20with%20.files&source=https%3a%2f%2fwww.kalkayan.io%2fposts%2ftooling-with-dotfiles%2f"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg><span class=tool-tip>Share on linkedin</span></a></div></footer></article><footer class=footer><div class=info><div class=copyright><span>These are the experiences not tutorials.</span></div><div style=text-align:right><div class=social-icons><a href=https://bit.ly/to-gh target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://bit.ly/to-lnkd target=_blank rel="noopener noreferrer me" title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a href=mailto:rec.manish.sahani@gmail.com target=_blank rel="noopener noreferrer me" title=Email><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></div></div></div><div style=text-align:right><span>copyright</span>
<span>&copy; 2021 <a href=http://bit.ly/to-lnkd>Manish Sahani</a></span></div><div class=acknowledgement><span>This site is build with
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>,
and uses <a href=https://github.com/kalkayan/kalkayan.paper rel=noopener target=_blank>kalkayan.paper</a> as its theme.</span></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></main></div></body></html>